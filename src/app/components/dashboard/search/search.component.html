<div class="bg">
    <div class="container">
      <form>
        <div class="row text-align-center">
          <h2 class="heading">Search for your book..</h2>
        </div>
        <div class="row search-bar">
  
            <div class="form-group col-md-9">
              <input class="form-control form-control-underlined inputSearch" name="something"
                [(ngModel)]="searchData" (keyup)="search($event)" #inputSearch />
            </div>
  
            <div class="form-group col">
              <select id="Field Search" [(ngModel)]="fieldSearch" class="form-control inputSearch" name="Field Search"
                (change)="resetSearch()">
                <option value="isbn">ISBN</option>
                <option *ngFor="let displayfield of displayFields" value="{{ displayfield }}">{{ displayfield | titlecase }}</option>
                <option value="year">Release Year</option>
              </select>
            </div>
  
        </div>

        <div class="row">
          <h1 class ="side-heading" *ngIf="(ss.newData && ss.searchData.length === 0) || (ss.resetData && ss.newData)">Here are 2019 books!!</h1>
          <h1 class ="side-heading" *ngIf="(!ss.newData && ss.searchData.length>=4) || !ss.reset1">Here are the searched results</h1>
        </div>
  
      </form>
  
      <app-alert *ngIf="(ss.booksData.length === 0 && ss.searchData.length>=4 && ss.isLoading === false)"
                  [errorData]="errorData"
      ></app-alert>
      <app-alert *ngIf="ss.searchData.length>=1 && 3>=ss.searchData.length"
                  [errorData]="alertData">

      </app-alert>
      <!-- <div *ngIf="(fieldSearch!='year' && searchData.length>=3) ||(fieldSearch=='year' && searchData.length>3 )" class="table-responsive">
        <table *ngIf="(ss.booksData | filterContent: searchData:fieldSearch).length > 0" class="table table-striped table-bordered">
          <thead>
            <th class="table-heading" *ngFor="let searchfield of searchFields">{{ searchfield | uppercase }}</th>
          </thead>
  
          <tbody class="hyperlink">
            <tr *ngFor="
                let book of ss.booksData | filterContent: searchData:fieldSearch;">
              <td>{{ book.isbn }}</td>
              <td><img class="imageData"src="{{book.image}}">{{book.title }}</td>
              <td>{{ book.author }}</td>
              <td>{{ book.year }}</td>
              <td class="text-center">
                <button type="button" class="btn btn-success" [class.disabled]="isDisabled"
                [disabled] = '(book.quantity - book.rentedCount) === 0'
                [routerLink]="['/reserveBook']" (click) = 'reserveBook(book)'>
                    Reserve
                </button>
                <p class="font-italic text-muted available"><strong>{{book.quantity - book.rentedCount}}</strong> books available</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div> -->
      <div *ngIf="ss.isLoading;else login_content" class="d-flex justify-content-center">
          <app-loader></app-loader>
      </div>
      <ng-template #login_content>
      <div class="table-responsive">
        <table *ngIf="ss.booksData.length > 0" class="table table-striped table-bordered">
          <thead>
            <th class="table-heading">ISBN</th>
            <th class="table-heading" *ngFor="let searchfield of searchFields">{{searchfield | titlecase}}</th>
          </thead>
  
          <tbody class="hyperlink">
            <tr *ngFor="
                let book of ss.booksData">
              <td>{{ book.isbn }}</td>
              <td><img class="imageData"src="{{book.image}}">{{book.title }}</td>
              <td>{{ book.author }}</td>
              <td>{{ book.year }}</td>
              <td class="text-center">
                <button type="button" class="btn btn-success" [class.disabled]="isDisabled"
                [disabled] = '(book.quantity - book.rentedCount) === 0'
                [routerLink]="['/reserveBook']" (click) = 'reserveBook(book)'>
                    Reserve
                </button>
                <p class="font-italic text-muted available"><strong>{{book.quantity - book.rentedCount}}</strong> books available</p>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </ng-template>
    </div>
  </div>
  